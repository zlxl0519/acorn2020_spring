<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>jsonp_loginform.html</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
<link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
<style>
	.container{
		width:500px;
		height:350px;
		margin: 10% 30% 50% 30%;
		border: 5px double #e6dad4;
		padding: 20px;
		border-radius:10%;
		-webkit-box-shadow: 18px 11px 13px 0px rgba(0,0,0,0.48);
		-moz-box-shadow: 18px 11px 13px 0px rgba(0,0,0,0.48);
		box-shadow: 18px 11px 13px 0px rgba(171,136,93,1);
		background-color:#ff813d;
	}
</style>
<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
</head>
<body>
<div class="container">
	<h1 class="text-monospace">Login</h1>
	<form class="animate__animated animate__fadeInUp" id="myForm">
		<div class="form-group">
			<label for="id">아이디</label>
			<input class="form-control" id="id" type="text" name="id" />
		</div>
		<div class="form-group">
			<label for="pwd">비밀번호</label>
			<input class="form-control" id="pwd" type="text" name="pwd"/>
		</div>
		<button class="btn btn-dark" id="sendBtn" type="submit">로그인</button>
	</form>
	<p class="text-monospace alert alert-success" id="result"></p>
</div>
<script>
	//로그인 버튼을 누르면 form 에 submit 이벤트가 일어나고
	// 해당 이벤트가 일어났을때 호출되는 함수 등록
	$("#myForm").on("submit" ,function(){
		//입력한 아이디 비밀번호를 읽어온다.
		var inputId=$("#id").val();
		var inputPwd=$("#pwd").val();
		
		$.ajax({
			url:"http://localhost:8888/spring05/api/jsonp_login.do",
			dataType:"jsonp",
			data:{id:inputId, pwd:inputPwd},
			success:function(data){
				console.log(data);
				if(data.isValid){
					$("#result").text("로그인 정보가 일치합니다.");
				}else{
					$("#result").text("로그인 정보가 일치하지 않습니다.");
				}
			},
			error:function(data){
				console.log(data);
			}
		});
		return false;// 폼 전송 막기
	});
</script>
</body>
</html>